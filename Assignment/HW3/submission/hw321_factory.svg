<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="537px" preserveAspectRatio="none" style="width:755px;height:537px;background:#FFFFFF;" version="1.1" viewBox="0 0 755 537" width="755px" zoomAndPan="magnify"><defs><filter height="300%" id="f1i3qjbk8euewb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="240" x="251.25" y="16.708">3-2-1 Smart Light Factory</text><!--MD5=[7c1a0278dec21c72584b17e1785fd623]
class Light--><rect codeLine="23" fill="#FEFECE" filter="url(#f1i3qjbk8euewb)" height="60.8047" id="Light" style="stroke:#A80036;stroke-width:1.5;" width="168" x="528.5" y="157.9531"/><ellipse cx="592.75" cy="173.9531" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M593.7031,170.7344 L595.4219,170.7344 C595.8125,170.7344 596,170.7031 596.125,170.625 C596.3906,170.4688 596.5313,170.1875 596.5313,169.8906 C596.5313,169.625 596.4219,169.3594 596.1875,169.1875 C596.0156,169.0781 595.875,169.0469 595.4219,169.0469 L590.2813,169.0469 C589.8438,169.0469 589.7188,169.0625 589.5625,169.1563 C589.3125,169.3125 589.1563,169.6094 589.1563,169.8906 C589.1563,170.1719 589.2969,170.4219 589.5156,170.5938 C589.6719,170.7031 589.8594,170.7344 590.2813,170.7344 L592,170.7344 L592,177.25 L590.2813,177.25 C589.8438,177.25 589.7188,177.2656 589.5625,177.375 C589.3125,177.5313 589.1563,177.8125 589.1563,178.1094 C589.1563,178.3594 589.2969,178.625 589.5156,178.7813 C589.6719,178.9063 589.875,178.9531 590.2813,178.9531 L595.4219,178.9531 C596.1719,178.9531 596.5313,178.6719 596.5313,178.1094 C596.5313,177.8281 596.4219,177.5781 596.1875,177.4063 C596.0156,177.2813 595.875,177.25 595.4219,177.25 L593.7031,177.25 L593.7031,170.7344 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="31" x="613.25" y="178.1074">Light</text><line style="stroke:#A80036;stroke-width:1.5;" x1="529.5" x2="695.5" y1="189.9531" y2="189.9531"/><line style="stroke:#A80036;stroke-width:1.5;" x1="529.5" x2="695.5" y1="197.9531" y2="197.9531"/><ellipse cx="539.5" cy="208.9531" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="142" x="548.5" y="212.1636">update(msg: LightConfig)</text><!--MD5=[d40932010816485ec57b44b6eea2392a]
class Observer--><rect codeLine="27" fill="#FEFECE" filter="url(#f1i3qjbk8euewb)" height="60.8047" id="Observer" style="stroke:#A80036;stroke-width:1.5;" width="98" x="643.5" y="27.9531"/><ellipse cx="663.9" cy="43.9531" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M664.8531,40.7344 L666.5719,40.7344 C666.9625,40.7344 667.15,40.7031 667.275,40.625 C667.5406,40.4688 667.6813,40.1875 667.6813,39.8906 C667.6813,39.625 667.5719,39.3594 667.3375,39.1875 C667.1656,39.0781 667.025,39.0469 666.5719,39.0469 L661.4313,39.0469 C660.9938,39.0469 660.8688,39.0625 660.7125,39.1563 C660.4625,39.3125 660.3063,39.6094 660.3063,39.8906 C660.3063,40.1719 660.4469,40.4219 660.6656,40.5938 C660.8219,40.7031 661.0094,40.7344 661.4313,40.7344 L663.15,40.7344 L663.15,47.25 L661.4313,47.25 C660.9938,47.25 660.8688,47.2656 660.7125,47.375 C660.4625,47.5313 660.3063,47.8125 660.3063,48.1094 C660.3063,48.3594 660.4469,48.625 660.6656,48.7813 C660.8219,48.9063 661.025,48.9531 661.4313,48.9531 L666.5719,48.9531 C667.3219,48.9531 667.6813,48.6719 667.6813,48.1094 C667.6813,47.8281 667.5719,47.5781 667.3375,47.4063 C667.1656,47.2813 667.025,47.25 666.5719,47.25 L664.8531,47.25 L664.8531,40.7344 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="679.1" y="48.1074">Observer</text><line style="stroke:#A80036;stroke-width:1.5;" x1="644.5" x2="740.5" y1="59.9531" y2="59.9531"/><line style="stroke:#A80036;stroke-width:1.5;" x1="644.5" x2="740.5" y1="67.9531" y2="67.9531"/><ellipse cx="654.5" cy="78.9531" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="72" x="663.5" y="82.1636">update(msg)</text><!--MD5=[fc539fa3f3b7db9b31467e896d367b3b]
class Device--><rect codeLine="31" fill="#FEFECE" filter="url(#f1i3qjbk8euewb)" height="60.8047" id="Device" style="stroke:#A80036;stroke-width:1.5;" width="99" x="484" y="27.9531"/><ellipse cx="510.25" cy="43.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M512.5938,39.625 C511.6563,39.1875 511.0625,39.0469 510.1875,39.0469 C507.5625,39.0469 505.5625,41.125 505.5625,43.8438 L505.5625,44.9688 C505.5625,47.5469 507.6719,49.4375 510.5625,49.4375 C511.7813,49.4375 512.9375,49.1406 513.6875,48.5938 C514.2656,48.1875 514.5938,47.7344 514.5938,47.3438 C514.5938,46.8906 514.2031,46.5 513.7344,46.5 C513.5156,46.5 513.3125,46.5781 513.125,46.7656 C512.6719,47.25 512.6719,47.25 512.4844,47.3438 C512.0625,47.6094 511.375,47.7344 510.6094,47.7344 C508.5625,47.7344 507.2656,46.6406 507.2656,44.9375 L507.2656,43.8438 C507.2656,42.0625 508.5156,40.75 510.25,40.75 C510.8281,40.75 511.4375,40.9063 511.9063,41.1563 C512.3906,41.4375 512.5625,41.6563 512.6563,42.0625 C512.7188,42.4688 512.75,42.5938 512.8906,42.7188 C513.0313,42.8594 513.2656,42.9688 513.4844,42.9688 C513.75,42.9688 514.0156,42.8281 514.1875,42.6094 C514.2969,42.4531 514.3281,42.2656 514.3281,41.8438 L514.3281,40.4219 C514.3281,39.9844 514.3125,39.8594 514.2188,39.7031 C514.0625,39.4375 513.7813,39.2969 513.4844,39.2969 C513.1875,39.2969 512.9844,39.3906 512.7656,39.7031 L512.5938,39.625 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="42" x="526.75" y="48.1074">Device</text><line style="stroke:#A80036;stroke-width:1.5;" x1="485" x2="582" y1="59.9531" y2="59.9531"/><polygon fill="none" points="495,65.9531,499,69.9531,495,73.9531,491,69.9531" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="73" x="504" y="74.1636">name: String</text><line style="stroke:#A80036;stroke-width:1.5;" x1="485" x2="582" y1="80.7578" y2="80.7578"/><!--MD5=[0cfe8f31e9b96f6bebb97063dcbda0f7]
class LightFactory--><rect codeLine="35" fill="#FEFECE" filter="url(#f1i3qjbk8euewb)" height="86.4141" id="LightFactory" style="stroke:#A80036;stroke-width:1.5;" width="223" x="9" y="145.4531"/><ellipse cx="78.25" cy="161.4531" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M79.2031,158.2344 L80.9219,158.2344 C81.3125,158.2344 81.5,158.2031 81.625,158.125 C81.8906,157.9688 82.0313,157.6875 82.0313,157.3906 C82.0313,157.125 81.9219,156.8594 81.6875,156.6875 C81.5156,156.5781 81.375,156.5469 80.9219,156.5469 L75.7813,156.5469 C75.3438,156.5469 75.2188,156.5625 75.0625,156.6563 C74.8125,156.8125 74.6563,157.1094 74.6563,157.3906 C74.6563,157.6719 74.7969,157.9219 75.0156,158.0938 C75.1719,158.2031 75.3594,158.2344 75.7813,158.2344 L77.5,158.2344 L77.5,164.75 L75.7813,164.75 C75.3438,164.75 75.2188,164.7656 75.0625,164.875 C74.8125,165.0313 74.6563,165.3125 74.6563,165.6094 C74.6563,165.8594 74.7969,166.125 75.0156,166.2813 C75.1719,166.4063 75.375,166.4531 75.7813,166.4531 L80.9219,166.4531 C81.6719,166.4531 82.0313,166.1719 82.0313,165.6094 C82.0313,165.3281 81.9219,165.0781 81.6875,164.9063 C81.5156,164.7813 81.375,164.75 80.9219,164.75 L79.2031,164.75 L79.2031,158.2344 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="76" x="98.75" y="165.6074">LightFactory</text><line style="stroke:#A80036;stroke-width:1.5;" x1="10" x2="231" y1="177.4531" y2="177.4531"/><polygon fill="none" points="20,183.4531,24,187.4531,20,191.4531,16,187.4531" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="103" x="29" y="191.6636">_lm: LightManager</text><line style="stroke:#A80036;stroke-width:1.5;" x1="10" x2="231" y1="198.2578" y2="198.2578"/><ellipse cx="20" cy="209.2578" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="145" x="29" y="212.4683">createLight(name: String)</text><polygon fill="#FFFF44" points="20,217.0625,24,221.0625,20,225.0625,16,221.0625" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="197" x="29" y="225.2729">createConcreteLight(name: String)</text><!--MD5=[f9c14602a18ff8fa6b20df597f09e334]
class LightManager--><rect codeLine="43" fill="#FEFECE" filter="url(#f1i3qjbk8euewb)" height="99.2188" id="LightManager" style="stroke:#A80036;stroke-width:1.5;" width="176" x="292.5" y="138.9531"/><ellipse cx="336.3" cy="154.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M338.6438,150.625 C337.7063,150.1875 337.1125,150.0469 336.2375,150.0469 C333.6125,150.0469 331.6125,152.125 331.6125,154.8438 L331.6125,155.9688 C331.6125,158.5469 333.7219,160.4375 336.6125,160.4375 C337.8313,160.4375 338.9875,160.1406 339.7375,159.5938 C340.3156,159.1875 340.6438,158.7344 340.6438,158.3438 C340.6438,157.8906 340.2531,157.5 339.7844,157.5 C339.5656,157.5 339.3625,157.5781 339.175,157.7656 C338.7219,158.25 338.7219,158.25 338.5344,158.3438 C338.1125,158.6094 337.425,158.7344 336.6594,158.7344 C334.6125,158.7344 333.3156,157.6406 333.3156,155.9375 L333.3156,154.8438 C333.3156,153.0625 334.5656,151.75 336.3,151.75 C336.8781,151.75 337.4875,151.9063 337.9563,152.1563 C338.4406,152.4375 338.6125,152.6563 338.7063,153.0625 C338.7688,153.4688 338.8,153.5938 338.9406,153.7188 C339.0813,153.8594 339.3156,153.9688 339.5344,153.9688 C339.8,153.9688 340.0656,153.8281 340.2375,153.6094 C340.3469,153.4531 340.3781,153.2656 340.3781,152.8438 L340.3781,151.4219 C340.3781,150.9844 340.3625,150.8594 340.2688,150.7031 C340.1125,150.4375 339.8313,150.2969 339.5344,150.2969 C339.2375,150.2969 339.0344,150.3906 338.8156,150.7031 L338.6438,150.625 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="356.7" y="159.1074">LightManager</text><line style="stroke:#A80036;stroke-width:1.5;" x1="293.5" x2="467.5" y1="170.9531" y2="170.9531"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="300.5" y="178.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="150" x="312.5" y="185.1636">_lights: Dict&lt;String, Light&gt;</text><line style="stroke:#A80036;stroke-width:1.5;" x1="293.5" x2="467.5" y1="191.7578" y2="191.7578"/><ellipse cx="303.5" cy="202.7578" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="127" x="312.5" y="205.9683">getLight(name: String)</text><ellipse cx="303.5" cy="215.5625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="93" x="312.5" y="218.7729">addLight(l: Light)</text><ellipse cx="303.5" cy="228.3672" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="139" x="312.5" y="231.5776">delTrigger(name: String)</text><!--MD5=[999e49f72af8639b360af99f8c1ff713]
class SwitchLight--><rect codeLine="50" fill="#FEFECE" filter="url(#f1i3qjbk8euewb)" height="99.2188" id="SwitchLight" style="stroke:#A80036;stroke-width:1.5;" width="168" x="528.5" y="287.9531"/><ellipse cx="574.75" cy="303.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M577.0938,299.625 C576.1563,299.1875 575.5625,299.0469 574.6875,299.0469 C572.0625,299.0469 570.0625,301.125 570.0625,303.8438 L570.0625,304.9688 C570.0625,307.5469 572.1719,309.4375 575.0625,309.4375 C576.2813,309.4375 577.4375,309.1406 578.1875,308.5938 C578.7656,308.1875 579.0938,307.7344 579.0938,307.3438 C579.0938,306.8906 578.7031,306.5 578.2344,306.5 C578.0156,306.5 577.8125,306.5781 577.625,306.7656 C577.1719,307.25 577.1719,307.25 576.9844,307.3438 C576.5625,307.6094 575.875,307.7344 575.1094,307.7344 C573.0625,307.7344 571.7656,306.6406 571.7656,304.9375 L571.7656,303.8438 C571.7656,302.0625 573.0156,300.75 574.75,300.75 C575.3281,300.75 575.9375,300.9063 576.4063,301.1563 C576.8906,301.4375 577.0625,301.6563 577.1563,302.0625 C577.2188,302.4688 577.25,302.5938 577.3906,302.7188 C577.5313,302.8594 577.7656,302.9688 577.9844,302.9688 C578.25,302.9688 578.5156,302.8281 578.6875,302.6094 C578.7969,302.4531 578.8281,302.2656 578.8281,301.8438 L578.8281,300.4219 C578.8281,299.9844 578.8125,299.8594 578.7188,299.7031 C578.5625,299.4375 578.2813,299.2969 577.9844,299.2969 C577.6875,299.2969 577.4844,299.3906 577.2656,299.7031 L577.0938,299.625 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="67" x="595.25" y="308.1074">SwitchLight</text><line style="stroke:#A80036;stroke-width:1.5;" x1="529.5" x2="695.5" y1="319.9531" y2="319.9531"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="536.5" y="327.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="67" x="548.5" y="334.1636">_state: Bool</text><line style="stroke:#A80036;stroke-width:1.5;" x1="529.5" x2="695.5" y1="340.7578" y2="340.7578"/><ellipse cx="539.5" cy="351.7578" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="142" x="548.5" y="354.9683">update(msg: LightConfig)</text><ellipse cx="539.5" cy="364.5625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59" x="548.5" y="367.7729">switchOn()</text><ellipse cx="539.5" cy="377.3672" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="60" x="548.5" y="380.5776">switchOff()</text><!--MD5=[a54edd4c870d7b3a603adac8183ae883]
class DimmLight--><rect codeLine="57" fill="#FEFECE" filter="url(#f1i3qjbk8euewb)" height="86.4141" id="DimmLight" style="stroke:#A80036;stroke-width:1.5;" width="175" x="525" y="436.9531"/><ellipse cx="577.25" cy="452.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M579.5938,448.625 C578.6563,448.1875 578.0625,448.0469 577.1875,448.0469 C574.5625,448.0469 572.5625,450.125 572.5625,452.8438 L572.5625,453.9688 C572.5625,456.5469 574.6719,458.4375 577.5625,458.4375 C578.7813,458.4375 579.9375,458.1406 580.6875,457.5938 C581.2656,457.1875 581.5938,456.7344 581.5938,456.3438 C581.5938,455.8906 581.2031,455.5 580.7344,455.5 C580.5156,455.5 580.3125,455.5781 580.125,455.7656 C579.6719,456.25 579.6719,456.25 579.4844,456.3438 C579.0625,456.6094 578.375,456.7344 577.6094,456.7344 C575.5625,456.7344 574.2656,455.6406 574.2656,453.9375 L574.2656,452.8438 C574.2656,451.0625 575.5156,449.75 577.25,449.75 C577.8281,449.75 578.4375,449.9063 578.9063,450.1563 C579.3906,450.4375 579.5625,450.6563 579.6563,451.0625 C579.7188,451.4688 579.75,451.5938 579.8906,451.7188 C580.0313,451.8594 580.2656,451.9688 580.4844,451.9688 C580.75,451.9688 581.0156,451.8281 581.1875,451.6094 C581.2969,451.4531 581.3281,451.2656 581.3281,450.8438 L581.3281,449.4219 C581.3281,448.9844 581.3125,448.8594 581.2188,448.7031 C581.0625,448.4375 580.7813,448.2969 580.4844,448.2969 C580.1875,448.2969 579.9844,448.3906 579.7656,448.7031 L579.5938,448.625 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="62" x="597.75" y="457.1074">DimmLight</text><line style="stroke:#A80036;stroke-width:1.5;" x1="526" x2="699" y1="468.9531" y2="468.9531"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="533" y="476.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="115" x="545" y="483.1636">_brightness: Percent</text><line style="stroke:#A80036;stroke-width:1.5;" x1="526" x2="699" y1="489.7578" y2="489.7578"/><ellipse cx="536" cy="500.7578" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="142" x="545" y="503.9683">update(msg: LightConfig)</text><ellipse cx="536" cy="513.5625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="149" x="545" y="516.7729">setBrightness(lvl: Percent)</text><!--MD5=[23ebd66c8ed1daf35424c4aec9df7532]
class SwitchLightFactory--><rect codeLine="63" fill="#FEFECE" filter="url(#f1i3qjbk8euewb)" height="60.8047" id="SwitchLightFactory" style="stroke:#A80036;stroke-width:1.5;" width="223" x="9" y="306.9531"/><ellipse cx="60.25" cy="322.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M62.5938,318.625 C61.6563,318.1875 61.0625,318.0469 60.1875,318.0469 C57.5625,318.0469 55.5625,320.125 55.5625,322.8438 L55.5625,323.9688 C55.5625,326.5469 57.6719,328.4375 60.5625,328.4375 C61.7813,328.4375 62.9375,328.1406 63.6875,327.5938 C64.2656,327.1875 64.5938,326.7344 64.5938,326.3438 C64.5938,325.8906 64.2031,325.5 63.7344,325.5 C63.5156,325.5 63.3125,325.5781 63.125,325.7656 C62.6719,326.25 62.6719,326.25 62.4844,326.3438 C62.0625,326.6094 61.375,326.7344 60.6094,326.7344 C58.5625,326.7344 57.2656,325.6406 57.2656,323.9375 L57.2656,322.8438 C57.2656,321.0625 58.5156,319.75 60.25,319.75 C60.8281,319.75 61.4375,319.9063 61.9063,320.1563 C62.3906,320.4375 62.5625,320.6563 62.6563,321.0625 C62.7188,321.4688 62.75,321.5938 62.8906,321.7188 C63.0313,321.8594 63.2656,321.9688 63.4844,321.9688 C63.75,321.9688 64.0156,321.8281 64.1875,321.6094 C64.2969,321.4531 64.3281,321.2656 64.3281,320.8438 L64.3281,319.4219 C64.3281,318.9844 64.3125,318.8594 64.2188,318.7031 C64.0625,318.4375 63.7813,318.2969 63.4844,318.2969 C63.1875,318.2969 62.9844,318.3906 62.7656,318.7031 L62.5938,318.625 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="112" x="80.75" y="327.1074">SwitchLightFactory</text><line style="stroke:#A80036;stroke-width:1.5;" x1="10" x2="231" y1="338.9531" y2="338.9531"/><line style="stroke:#A80036;stroke-width:1.5;" x1="10" x2="231" y1="346.9531" y2="346.9531"/><polygon fill="#FFFF44" points="20,352.9531,24,356.9531,20,360.9531,16,356.9531" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="197" x="29" y="361.1636">createConcreteLight(name: String)</text><!--MD5=[4b958a291f9132509187a3e8b765e630]
class DimmLightFactory--><rect codeLine="67" fill="#FEFECE" filter="url(#f1i3qjbk8euewb)" height="60.8047" id="DimmLightFactory" style="stroke:#A80036;stroke-width:1.5;" width="223" x="9" y="449.4531"/><ellipse cx="62.75" cy="465.4531" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M65.0938,461.125 C64.1563,460.6875 63.5625,460.5469 62.6875,460.5469 C60.0625,460.5469 58.0625,462.625 58.0625,465.3438 L58.0625,466.4688 C58.0625,469.0469 60.1719,470.9375 63.0625,470.9375 C64.2813,470.9375 65.4375,470.6406 66.1875,470.0938 C66.7656,469.6875 67.0938,469.2344 67.0938,468.8438 C67.0938,468.3906 66.7031,468 66.2344,468 C66.0156,468 65.8125,468.0781 65.625,468.2656 C65.1719,468.75 65.1719,468.75 64.9844,468.8438 C64.5625,469.1094 63.875,469.2344 63.1094,469.2344 C61.0625,469.2344 59.7656,468.1406 59.7656,466.4375 L59.7656,465.3438 C59.7656,463.5625 61.0156,462.25 62.75,462.25 C63.3281,462.25 63.9375,462.4063 64.4063,462.6563 C64.8906,462.9375 65.0625,463.1563 65.1563,463.5625 C65.2188,463.9688 65.25,464.0938 65.3906,464.2188 C65.5313,464.3594 65.7656,464.4688 65.9844,464.4688 C66.25,464.4688 66.5156,464.3281 66.6875,464.1094 C66.7969,463.9531 66.8281,463.7656 66.8281,463.3438 L66.8281,461.9219 C66.8281,461.4844 66.8125,461.3594 66.7188,461.2031 C66.5625,460.9375 66.2813,460.7969 65.9844,460.7969 C65.6875,460.7969 65.4844,460.8906 65.2656,461.2031 L65.0938,461.125 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="107" x="83.25" y="469.6074">DimmLightFactory</text><line style="stroke:#A80036;stroke-width:1.5;" x1="10" x2="231" y1="481.4531" y2="481.4531"/><line style="stroke:#A80036;stroke-width:1.5;" x1="10" x2="231" y1="489.4531" y2="489.4531"/><polygon fill="#FFFF44" points="20,495.4531,24,499.4531,20,503.4531,16,499.4531" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="197" x="29" y="503.6636">createConcreteLight(name: String)</text><!--MD5=[df25f2eec52b4b02f7c796756b07ea22]
reverse link LightFactory to SwitchLightFactory--><path codeLine="75" d="M120.5,251.5501 C120.5,251.5501 120.5,306.7491 120.5,306.7491 " fill="none" id="LightFactory-backto-SwitchLightFactory" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="113.5,251.5501,120.5,231.5501,127.5,251.5501,113.5,251.5501" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[84eb6e69d1d662cb45b19d4745f8cbb2]
reverse link SwitchLightFactory to DimmLightFactory--><path codeLine="77" d="M120.5,388.0231 C120.5,388.0231 120.5,449.4338 120.5,449.4338 " fill="none" id="SwitchLightFactory-backto-DimmLightFactory" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="113.5,388.0231,120.5,368.0231,127.5,388.0231,113.5,388.0231" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[576b13ae8f28b18acb71e8448893e1f9]
link LightFactory to LightManager--><path codeLine="78" d="M232.272,188.9531 C232.272,188.9531 287.363,188.9531 287.363,188.9531 " fill="none" id="LightFactory-to-LightManager" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="292.363,188.9531,283.363,184.9531,287.363,188.9531,283.363,192.9531,292.363,188.9531" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="240.0504" y="185.5403">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="276.445" y="185.4148">1</text><!--MD5=[ba3472a84c052001513e8846267e9721]
link LightManager to Light--><path codeLine="79" d="M468.54,188.9531 C468.54,188.9531 523.35,188.9531 523.35,188.9531 " fill="none" id="LightManager-to-Light" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="528.35,188.9531,519.35,184.9531,523.35,188.9531,519.35,192.9531,528.35,188.9531" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="476.4497" y="185.4148">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="513.5437" y="185.4112">*</text><!--MD5=[f47ea240a50a6bf1ded9b03193214bdb]
reverse link Observer to Light--><path codeLine="80" d="M670,109.2611 C670,109.2611 670,157.8661 670,157.8661 " fill="none" id="Observer-backto-Light" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="663,109.2611,670,89.2611,677,109.2611,663,109.2611" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[dcd22d50342af11664ed34e33e614224]
reverse link Device to Light--><path codeLine="81" d="M555.75,109.2611 C555.75,109.2611 555.75,157.8661 555.75,157.8661 " fill="none" id="Device-backto-Light" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="548.75,109.2611,555.75,89.2611,562.75,109.2611,548.75,109.2611" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d279c403f4cddc7e28c36a1def3c8083]
reverse link Light to SwitchLight--><path codeLine="82" d="M612.5,238.9651 C612.5,238.9651 612.5,287.9181 612.5,287.9181 " fill="none" id="Light-backto-SwitchLight" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="605.5,238.9651,612.5,218.9651,619.5,238.9651,605.5,238.9651" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[76cf96c8adfc92d288b4a008dbb2dd4c]
reverse link SwitchLight to DimmLight--><path codeLine="83" d="M612.5,407.2931 C612.5,407.2931 612.5,436.5453 612.5,436.5453 " fill="none" id="SwitchLight-backto-DimmLight" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="605.5,407.2931,612.5,387.2931,619.5,407.2931,605.5,407.2931" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6e87c0e8a3ff965ab7f885b3f425b5e6]
@startuml
' Settings
' ============================

' use +,#,- instead of icons
'skinparam classAttributeIconSize 0

' horizontal distance in px
skinparam nodesep 60 

' vertical distance in px
skinparam ranksep 50

' use only straight lines (ortho/polyline)
skinparam linetype ortho

' title
title 3-2-1 Smart Light Factory



' Abstract Classes
' ============================
interface Light{
    +update(msg: LightConfig)
}

interface Observer{
    +update(msg)
}

class Device{
    #name: String
}

Interface LightFactory{
    #_lm: LightManager 
    +createLight(name: String)
    #createConcreteLight(name: String)
}

' Concrete Classes
' ============================
class LightManager{
    -_lights: Dict<String, Light> 
    +getLight(name: String)
    +addLight(l: Light)
    +delTrigger(name: String)
}

class SwitchLight{
    -_state: Bool
    +update(msg: LightConfig)
    +switchOn()
    +switchOff()
}

class DimmLight{
    -_brightness: Percent
    +update(msg: LightConfig)
    +setBrightness(lvl: Percent)
}

class SwitchLightFactory{
    #createConcreteLight(name: String)
}

class DimmLightFactory{
    #createConcreteLight(name: String)
}


' Relations
' ================================

SwitchLightFactory -u-|> LightFactory

DimmLightFactory -u-|> SwitchLightFactory
LightFactory "1" -r-> "1" LightManager
LightManager "1" -r-> "*" Light
Light -u-|> Observer
Light -u-|> Device
SwitchLight -u-|> Light
DimmLight -u-|> SwitchLight
@enduml

@startuml


skinparam nodesep 60 

skinparam ranksep 50

skinparam linetype ortho

title 3-2-1 Smart Light Factory



interface Light{
    +update(msg: LightConfig)
}

interface Observer{
    +update(msg)
}

class Device{
    #name: String
}

Interface LightFactory{
    #_lm: LightManager 
    +createLight(name: String)
    #createConcreteLight(name: String)
}

class LightManager{
    -_lights: Dict<String, Light> 
    +getLight(name: String)
    +addLight(l: Light)
    +delTrigger(name: String)
}

class SwitchLight{
    -_state: Bool
    +update(msg: LightConfig)
    +switchOn()
    +switchOff()
}

class DimmLight{
    -_brightness: Percent
    +update(msg: LightConfig)
    +setBrightness(lvl: Percent)
}

class SwitchLightFactory{
    #createConcreteLight(name: String)
}

class DimmLightFactory{
    #createConcreteLight(name: String)
}



SwitchLightFactory -u-|> LightFactory

DimmLightFactory -u-|> SwitchLightFactory
LightFactory "1" -r-> "1" LightManager
LightManager "1" -r-> "*" Light
Light -u-|> Observer
Light -u-|> Device
SwitchLight -u-|> Light
DimmLight -u-|> SwitchLight
@enduml

PlantUML version 1.2022.2beta1(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>